<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.7.3
  
</title>

  <link rel="stylesheet" href="/stylesheets/docs/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="/stylesheets/docs/common.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="/stylesheets/docs/rspec.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="/javascripts/docs/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="/javascripts/docs/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>rspec-rails <a href="http://travis-ci.org/rspec/rspec-rails"><img src="https://secure.travis-ci.org/rspec/rspec-rails.png?branch=master" alt="Build Status"></a> <a href="https://codeclimate.com/github/rspec/rspec-rails"><img src="https://codeclimate.com/github/rspec/rspec-rails.png" alt="Code Climate"></a></h1>

<p><strong>rspec-rails</strong> is a testing framework for Rails 3.x and 4.x.</p>

<p>Use <strong><a href="http://github.com/dchelimsky/rspec-rails">rspec-rails 1.x</a></strong> for Rails
2.x.</p>

<h2>Installation</h2>

<p>Add <code>rspec-rails</code> to <strong>both</strong> the <code>:development</code> and <code>:test</code> groups in the
<code>Gemfile</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_group'>group</span> <span class='symbol'>:development</span><span class='comma'>,</span> <span class='symbol'>:test</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rspec-rails</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~&gt; 2.0</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Download and install by running:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_install'>install</span>
</code></pre>

<p>Initialize the <code>spec/</code> directory (where specs will reside) with:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_rails'>rails</span> <span class='id identifier rubyid_generate'>generate</span> <span class='label'>rspec:</span><span class='id identifier rubyid_install'>install</span>
</code></pre>

<p>To run your specs, use the <code>rspec</code> command:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rspec'>rspec</span>

<span class='comment'># Run only model specs
</span><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rspec'>rspec</span> <span class='id identifier rubyid_spec'>spec</span><span class='op'>/</span><span class='id identifier rubyid_models'>models</span>

<span class='comment'># Run only specs for AccountsController
</span><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rspec'>rspec</span> <span class='id identifier rubyid_spec'>spec</span><span class='op'>/</span><span class='id identifier rubyid_controllers'>controllers</span><span class='op'>/</span><span class='id identifier rubyid_accounts_controller_spec'>accounts_controller_spec</span><span class='period'>.</span><span class='id identifier rubyid_rb'>rb</span>
</code></pre>

<p>Specs can also be run via <code>rake spec</code>, though this command may be slower to
start than the <code>rspec</code> command.</p>

<p>In Rails 4, you may want to create a binstub for the <code>rspec</code> command so it can
be run via <code>bin/rspec</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_binstubs'>binstubs</span> <span class='id identifier rubyid_rspec'>rspec</span><span class='op'>-</span><span class='id identifier rubyid_core'>core</span>
</code></pre>

<h3>Generators</h3>

<p>Once installed, RSpec will generate spec files instead of Test::Unit test files
when commands like <code>rails generate model</code> and <code>rails generate controller</code> are
used.</p>

<p>You may also invoke invoke RSpec generators independently. For instance,
running <code>rails generate rspec:model</code> will generate a model spec. For more
information, see <a href="https://www.relishapp.com/rspec/rspec-rails/docs/generators">list of all
generators</a>.</p>

<h2>Model Specs</h2>

<p>Model specs reside in the <code>spec/models</code> folder. Use model specs to describe
behavior of models (usually ActiveRecord-based) in the application. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spec_helper</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_describe'>describe</span> <span class='const'>User</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>orders by last name</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_lindeman'>lindeman</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='label'>first_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Andy</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>last_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Lindeman</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_chelimsky'>chelimsky</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='label'>first_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>David</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>last_name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Chelimsky</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_ordered_by_last_name'>ordered_by_last_name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_chelimsky'>chelimsky</span><span class='comma'>,</span> <span class='id identifier rubyid_lindeman'>lindeman</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>For more information, see <a href="https://www.relishapp.com/rspec/rspec-rails/docs/model-specs">cucumber scenarios for model
specs</a>.</p>

<h2>Controller Specs</h2>

<p>Controller specs reside in the <code>spec/controllers</code> folder. Use controller specs
to describe behavior of Rails controllers. For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spec_helper</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_describe'>describe</span> <span class='const'>PostsController</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_describe'>describe</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GET #index</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>responds successfully with an HTTP 200 status code</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:index</span>
      <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_be_success'>be_success</span>
      <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='int'>200</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renders the index template</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:index</span>
      <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_render_template'>render_template</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>index</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>loads all of the posts into @posts</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_post1'>post1</span><span class='comma'>,</span> <span class='id identifier rubyid_post2'>post2</span> <span class='op'>=</span> <span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='comma'>,</span> <span class='const'>Post</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span>
      <span class='id identifier rubyid_get'>get</span> <span class='symbol'>:index</span>

      <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_assigns'>assigns</span><span class='lparen'>(</span><span class='symbol'>:posts</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_match_array'>match_array</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_post1'>post1</span><span class='comma'>,</span> <span class='id identifier rubyid_post2'>post2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>For more information, see <a href="https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs">cucumber scenarios for controller
specs</a>.</p>

<p><strong>Note:</strong> To encourage more isolated testing, views are not rendered by default
in controller specs. If you wish to assert against the contents of the rendered
view in a controller spec, enable
<a href="https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs/render-views">render_views</a>
or use a higher-level <a href="#request-specs">request spec</a> or <a href="#feature-specs">feature
spec</a>.</p>

<h2><a id="request-spec"></a>Request Specs</h2>

<p>Request specs live in spec/requests, spec/api and
spec/integration, and mix in behavior
<a href="http://api.rubyonrails.org/classes/ActionDispatch/Integration/Runner.html">ActionDispatch::Integration::Runner</a>,
which is the basis for <a href="http://guides.rubyonrails.org/testing.html#integration-testing">Rails&#39; integration
tests</a>.  The
intent is to specify one or more request/response cycles from end to end using
a black box approach.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spec_helper</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_describe'>describe</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>home page</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>displays the user&#39;s username after successful login</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='symbol'>:username</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jdoe</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>secret</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_get'>get</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_assert_select'>assert_select</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>form.login</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_assert_select'>assert_select</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>input[name=?]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>username</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_assert_select'>assert_select</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>input[name=?]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>password</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_assert_select'>assert_select</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>input[type=?]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>submit</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_post'>post</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:username</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jdoe</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>secret</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_assert_select'>assert_select</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.header .username</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jdoe</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>This example uses only standard Rails and RSpec API&#39;s, but many RSpec/Rails
users like to use extension libraries like
<a href="https://github.com/thoughtbot/factory_girl">FactoryGirl</a> and
<a href="https://github.com/jnicklas/capybara">Capybara</a>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spec_helper</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_describe'>describe</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>home page</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>displays the user&#39;s username after successful login</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_user'>user</span> <span class='op'>=</span> <span class='const'>FactoryGirl</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='symbol'>:user</span><span class='comma'>,</span> <span class='symbol'>:username</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jdoe</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>secret</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_visit'>visit</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_fill_in'>fill_in</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Username</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:with</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jdoe</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_fill_in'>fill_in</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Password</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:with</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>secret</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_click_button'>click_button</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Log in</span><span class='tstring_end'>&quot;</span></span>

    <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_page'>page</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_have_selector'>have_selector</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.header .username</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jdoe</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>FactoryGirl decouples this example from changes to validation requirements,
which can be encoded into the underlying factory definition without requiring
changes to this example.</p>

<p>Among other benefits, Capybara binds the form post to the generated HTML, which
means we don&#39;t need to specify them separately.  Note that Capybara&#39;s DSL as
shown is, by default, only available in specs in the spec/features directory.
For more information, see the <a href="http://rubydoc.info/gems/rspec-rails/file/Capybara.md">Capybara integration
docs</a>.</p>

<p>There are several other Ruby libs that implement the factory pattern or provide
a DSL for request specs (a.k.a. acceptance or integration specs), but
FactoryGirl and Capybara seem to be the most widely used. Whether you choose
these or other libs, we strongly recommend using something for each of these
roles.</p>

<h1>View specs</h1>

<p>View specs live in spec/views, and mix in ActionView::TestCase::Behavior.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spec_helper</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_describe'>describe</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>events/index</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>renders _event partial for each event</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_assign'>assign</span><span class='lparen'>(</span><span class='symbol'>:events</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id identifier rubyid_stub_model'>stub_model</span><span class='lparen'>(</span><span class='const'>Event</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id identifier rubyid_stub_model'>stub_model</span><span class='lparen'>(</span><span class='const'>Event</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_render'>render</span>
    <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_view'>view</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_render_template'>render_template</span><span class='lparen'>(</span><span class='symbol'>:partial</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_event</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_describe'>describe</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>events/show</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>displays the event location</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_assign'>assign</span><span class='lparen'>(</span><span class='symbol'>:event</span><span class='comma'>,</span> <span class='id identifier rubyid_stub_model'>stub_model</span><span class='lparen'>(</span><span class='const'>Event</span><span class='comma'>,</span>
      <span class='symbol'>:location</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Chicago</span><span class='tstring_end'>&quot;</span></span>
    <span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_render'>render</span>
    <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_rendered'>rendered</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_include'>include</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Chicago</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>View specs infer the controller name and path from the path to the view
template. e.g. if the template is &quot;events/index.html.erb&quot; then:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_controller'>controller</span><span class='period'>.</span><span class='id identifier rubyid_controller_path'>controller_path</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>events</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_controller'>controller</span><span class='period'>.</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_path_parameters'>path_parameters</span><span class='lbracket'>[</span><span class='symbol'>:controller</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>events</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>This means that most of the time you don&#39;t need to set these values. When
spec&#39;ing a partial that is included across different controllers, you <em>may</em>
need to override these values before rendering the view.</p>

<p>To provide a layout for the render, you&#39;ll need to specify <em>both</em> the template
and the layout explicitly.  For example:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_render'>render</span> <span class='symbol'>:template</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>events/show</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:layout</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>layouts/application</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<h2><code>assign(key, val)</code></h2>

<p>Use this to assign values to instance variables in the view:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_assign'>assign</span><span class='lparen'>(</span><span class='symbol'>:widget</span><span class='comma'>,</span> <span class='id identifier rubyid_stub_model'>stub_model</span><span class='lparen'>(</span><span class='const'>Widget</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='id identifier rubyid_render'>render</span>
</code></pre>

<p>The code above assigns <code>stub_model(Widget)</code> to the <code>@widget</code> variable in the view, and then
renders the view.</p>

<p>Note that because view specs mix in <code>ActionView::TestCase</code> behavior, any
instance variables you set will be transparently propagated into your views
(similar to how instance variables you set in controller actions are made
available in views). For example:</p>

<pre class="code ruby"><code class="ruby"><span class='ivar'>@widget</span> <span class='op'>=</span> <span class='id identifier rubyid_stub_model'>stub_model</span><span class='lparen'>(</span><span class='const'>Widget</span><span class='rparen'>)</span>
<span class='id identifier rubyid_render'>render</span> <span class='comment'># @widget is available inside the view
</span></code></pre>

<p>RSpec doesn&#39;t officially support this pattern, which only works as a
side-effect of the inclusion of <code>ActionView::TestCase</code>. Be aware that it may be
made unavailable in the future.</p>

<h3>Upgrade note</h3>

<pre class="code ruby"><code class="ruby"><span class='comment'># rspec-rails-1.x
</span><span class='id identifier rubyid_assigns'>assigns</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_value'>value</span>

<span class='comment'># rspec-rails-2.x
</span><span class='id identifier rubyid_assign'>assign</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='rparen'>)</span>
</code></pre>

<h2><code>rendered</code></h2>

<p>This represents the rendered view.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_render'>render</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_rendered'>rendered</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Some text expected to appear on the page</span><span class='regexp_end'>/</span></span>
</code></pre>

<h3>Upgrade note</h3>

<pre class="code ruby"><code class="ruby"><span class='comment'># rspec-rails-1.x
</span><span class='id identifier rubyid_render'>render</span>
<span class='id identifier rubyid_response'>response</span><span class='period'>.</span><span class='id identifier rubyid_should'>should</span> <span class='id identifier rubyid_xxx'>xxx</span>

<span class='comment'># rspec-rails-2.x
</span><span class='id identifier rubyid_render'>render</span>
<span class='id identifier rubyid_rendered'>rendered</span><span class='period'>.</span><span class='id identifier rubyid_should'>should</span> <span class='id identifier rubyid_xxx'>xxx</span>

<span class='comment'># rspec-rails-2.x with expect syntax
</span><span class='id identifier rubyid_render'>render</span>
<span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_rendered'>rendered</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_xxx'>xxx</span>
</code></pre>

<h1>Routing specs</h1>

<p>Routing specs live in spec/routing.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spec_helper</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_describe'>describe</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>routing to profiles</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>routes /profile/:username to profile#show for username</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='symbol'>:get</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/profiles/jsmith</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_route_to'>route_to</span><span class='lparen'>(</span>
      <span class='symbol'>:controller</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>profiles</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='symbol'>:action</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>show</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='symbol'>:username</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>jsmith</span><span class='tstring_end'>&quot;</span></span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>does not expose a list of profiles</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='symbol'>:get</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/profiles</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_not_to'>not_to</span> <span class='id identifier rubyid_be_routable'>be_routable</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3>Upgrade note</h3>

<p><code>route_for</code> from rspec-rails-1.x is gone. Use <code>route_to</code> and <code>be_routable</code> instead.</p>

<h1>Helper specs</h1>

<p>Helper specs live in spec/helpers, and mix in ActionView::TestCase::Behavior.</p>

<p>Provides a <code>helper</code> object which mixes in the helper module being spec&#39;d, along
with <code>ApplicationHelper</code> (if present).</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>spec_helper</span><span class='tstring_end'>&#39;</span></span>
<span class='id identifier rubyid_describe'>describe</span> <span class='const'>EventsHelper</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_describe'>describe</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#link_to_event</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id identifier rubyid_it'>it</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>displays the title, and formatted date</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id identifier rubyid_event'>event</span> <span class='op'>=</span> <span class='const'>Event</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby Kaigi</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Date</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>2010</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>27</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='comment'># helper is an instance of ActionView::Base configured with the
</span>      <span class='comment'># EventsHelper and all of Rails&#39; built-in helpers
</span>      <span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_helper'>helper</span><span class='period'>.</span><span class='id identifier rubyid_link_to_event'>link_to_event</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_match'>match</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Ruby Kaigi, 27 Aug, 2010</span><span class='regexp_end'>/</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h1>Matchers</h1>

<p>rspec-rails exposes domain-specific matchers to each of the example group types. Most
of them simply delegate to Rails&#39; assertions.</p>

<h2><code>be_a_new</code></h2>

<ul>
<li>Available in all specs.</li>
<li>Primarily intended for controller specs</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_be_a_new'>be_a_new</span><span class='lparen'>(</span><span class='const'>Widget</span><span class='rparen'>)</span>
</code></pre>

<p>Passes if the object is a <code>Widget</code> and returns true for <code>new_record?</code></p>

<h2><code>render_template</code></h2>

<ul>
<li>Delegates to Rails&#39; assert_template.</li>
<li>Available in request, controller, and view specs.</li>
</ul>

<p>In request and controller specs, apply to the response object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_render_template'>render_template</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<p>In view specs, apply to the view object:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_view'>view</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_render_template'>render_template</span><span class='lparen'>(</span><span class='symbol'>:partial</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_form</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locals</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:widget</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_widget'>widget</span> <span class='rbrace'>}</span> <span class='rparen'>)</span>
</code></pre>

<h2><code>redirect_to</code></h2>

<ul>
<li>Delegates to assert_redirect</li>
<li>Available in request and controller specs.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_redirect_to'>redirect_to</span><span class='lparen'>(</span><span class='id identifier rubyid_widgets_path'>widgets_path</span><span class='rparen'>)</span>
</code></pre>

<h2><code>route_to</code></h2>

<ul>
<li>Delegates to Rails&#39; assert_routing.</li>
<li>Available in routing and controller specs.</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='symbol'>:get</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/widgets</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to'>to</span> <span class='id identifier rubyid_route_to'>route_to</span><span class='lparen'>(</span><span class='symbol'>:controller</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>widgets</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:action</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>index</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</code></pre>

<h2><code>be_routable</code></h2>

<p>Passes if the path is recognized by Rails&#39; routing. This is primarily intended
to be used with <code>not_to</code> to specify routes that should not be routable.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_expect'>expect</span><span class='lparen'>(</span><span class='symbol'>:get</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/widgets/1/edit</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_not_to'>not_to</span> <span class='id identifier rubyid_be_routable'>be_routable</span>
</code></pre>

<h1><code>rake</code> tasks</h1>

<p><code>rspec-rails</code> defines rake tasks to run the entire test suite (<code>rake spec</code>)
and subsets of tests (e.g., <code>rake spec:models</code>).</p>

<p>A full list of the available rake tasks can be seen by running <code>rake -T | grep
spec</code>.</p>

<h2>Customizing <code>rake</code> tasks</h2>

<p>If you want to customize the behavior of <code>rake spec</code>, you may <a href="https://www.relishapp.com/rspec/rspec-core/docs/command-line/rake-task">define your own
task in the <code>Rakefile</code> for your
project</a>.
However, you must first clear the task that rspec-rails defined:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_task'>task</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>spec</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
</code></pre>

<h3>Webrat and Capybara</h3>

<p>You can choose between webrat or capybara for simulating a browser, automating
a browser, or setting expectations using the matchers they supply. Just add
your preference to the Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>webrat</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'># ... or ...
</span><span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>capybara</span><span class='tstring_end'>&quot;</span></span>
</code></pre>

<p>See <a href="http://rubydoc.info/gems/rspec-rails/file/Capybara.md">http://rubydoc.info/gems/rspec-rails/file/Capybara.md</a>
for more info on Capybara integration.</p>

<h1>Contribute</h1>

<p>See <a href="http://github.com/rspec/rspec-dev">http://github.com/rspec/rspec-dev</a>.</p>

<p>For <code>rspec-rails</code>-specific development information, see
<a href="https://github.com/rspec/rspec-rails/blob/master/DEV-README.md">DEV-README</a>.</p>

<h1>Also see</h1>

<ul>
<li><a href="http://github.com/rspec/rspec">http://github.com/rspec/rspec</a></li>
<li><a href="http://github.com/rspec/rspec-core">http://github.com/rspec/rspec-core</a></li>
<li><a href="http://github.com/rspec/rspec-expectations">http://github.com/rspec/rspec-expectations</a></li>
<li><a href="http://github.com/rspec/rspec-mocks">http://github.com/rspec/rspec-mocks</a></li>
</ul>

<h2>Feature Requests &amp; Bugs</h2>

<p>See <a href="http://github.com/rspec/rspec-rails/issues">http://github.com/rspec/rspec-rails/issues</a></p>
</div></div>

    <div id="footer">
  Generated on Thu Jan 29 14:01:32 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.3 (ruby-2.1.5).
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59095215-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>
